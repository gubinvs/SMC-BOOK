{"ast":null,"code":"var _jsxFileName = \"/home/gubinvs/SMC-BOOK/src/App.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Navigate } from \"react-router-dom\";\nimport { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport Home from './Home/Home.jsx';\nimport RegistrationForm from './RegistrationForm/RegistrationForm.jsx';\nimport AuthorizationForm from './RegistrationForm/AuthorizationForm.jsx';\nimport Basket from './Basket/Basket.jsx';\nimport DeliveryAndPayment from \"./DeliveryAndPayment/DeliveryAndPayment.jsx\";\nimport DefineUser from \"./PersonalSpace/DefineUser.jsx\";\nimport CompanyDashboard from './PersonalSpace/CompanyDashboard.jsx';\nimport PersonalSpace from \"./PersonalSpace/PersonalSpace.jsx\";\nimport UpdatePassword from \"./RegistrationForm/UpdatePassword.jsx\";\nimport CatalogSection from \"./CatalogSection/CatalogSection.jsx\";\nimport ApiDiscription from \"./ApiDiscription/ApiDiscription.jsx\";\nimport { jwtDecode } from \"jwt-decode\"; // Установите эту библиотеку: npm install jwt-decode\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction isTokenValid(token) {\n  try {\n    const decoded = jwtDecode(token); // Декодируем токен\n    const currentTime = Math.floor(Date.now() / 1000); // Текущее время в секундах\n    return decoded.exp > currentTime; // Проверяем, не истек ли токен\n  } catch (error) {\n    console.error(\"Ошибка проверки токена:\", error);\n    return false; // Если токен невалиден или не может быть декодирован\n  }\n}\nfunction ProtectedRoute({\n  children\n}) {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token && isTokenValid(token)) {\n      setIsAuthenticated(true);\n    }\n    setLoading(false);\n  }, []);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 12\n    }, this);\n  }\n  return isAuthenticated ? children : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/Authorization\",\n    replace: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 39\n  }, this);\n}\n_s(ProtectedRoute, \"Ax+B/BOELR06clzL32vENhaokmk=\");\n_c = ProtectedRoute;\nconst App = () => {\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/ApiDiscription\",\n        element: /*#__PURE__*/_jsxDEV(ApiDiscription, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 48\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/Authorization\",\n        element: /*#__PURE__*/_jsxDEV(AuthorizationForm, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 47\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/Registration\",\n        element: /*#__PURE__*/_jsxDEV(RegistrationForm, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 46\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/UpdatePassword\",\n        element: /*#__PURE__*/_jsxDEV(UpdatePassword, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 48\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/CatalogSection\",\n        element: /*#__PURE__*/_jsxDEV(CatalogSection, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 48\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/DeliveryAndPayment\",\n        element: /*#__PURE__*/_jsxDEV(DeliveryAndPayment, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 52\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/Personal\",\n        element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          children: /*#__PURE__*/_jsxDEV(PersonalSpace, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 39\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 37\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/Basket\",\n        element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          children: /*#__PURE__*/_jsxDEV(Basket, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 39\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 37\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/DefineUser\",\n        element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          children: /*#__PURE__*/_jsxDEV(DefineUser, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 39\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 37\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/CompanyDashboard\",\n        element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          children: /*#__PURE__*/_jsxDEV(CompanyDashboard, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 35\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"ProtectedRoute\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","Navigate","useState","useEffect","BrowserRouter","Router","Routes","Route","Home","RegistrationForm","AuthorizationForm","Basket","DeliveryAndPayment","DefineUser","CompanyDashboard","PersonalSpace","UpdatePassword","CatalogSection","ApiDiscription","jwtDecode","jsxDEV","_jsxDEV","isTokenValid","token","decoded","currentTime","Math","floor","Date","now","exp","error","console","ProtectedRoute","children","_s","isAuthenticated","setIsAuthenticated","loading","setLoading","localStorage","getItem","fileName","_jsxFileName","lineNumber","columnNumber","to","replace","_c","App","path","element","_c2","$RefreshReg$"],"sources":["/home/gubinvs/SMC-BOOK/src/App.jsx"],"sourcesContent":["import React from 'react';\nimport { Navigate } from \"react-router-dom\";\nimport { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport Home from './Home/Home.jsx';\nimport RegistrationForm from './RegistrationForm/RegistrationForm.jsx';\nimport AuthorizationForm from './RegistrationForm/AuthorizationForm.jsx';\nimport Basket from './Basket/Basket.jsx';\nimport DeliveryAndPayment from \"./DeliveryAndPayment/DeliveryAndPayment.jsx\";\nimport DefineUser from \"./PersonalSpace/DefineUser.jsx\";\nimport CompanyDashboard from './PersonalSpace/CompanyDashboard.jsx';\nimport PersonalSpace from \"./PersonalSpace/PersonalSpace.jsx\";\nimport UpdatePassword from \"./RegistrationForm/UpdatePassword.jsx\";\nimport CatalogSection from \"./CatalogSection/CatalogSection.jsx\";\nimport ApiDiscription from \"./ApiDiscription/ApiDiscription.jsx\"\nimport { jwtDecode } from \"jwt-decode\"; // Установите эту библиотеку: npm install jwt-decode\n\n\n\nfunction isTokenValid(token) {\n  try {\n    const decoded = jwtDecode(token); // Декодируем токен\n    const currentTime = Math.floor(Date.now() / 1000); // Текущее время в секундах\n    return decoded.exp > currentTime; // Проверяем, не истек ли токен\n  } catch (error) {\n    console.error(\"Ошибка проверки токена:\", error);\n    return false; // Если токен невалиден или не может быть декодирован\n  }\n}\n\n\nfunction ProtectedRoute({ children }) {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n\n    if (token && isTokenValid(token)) {\n      setIsAuthenticated(true);\n    }\n    setLoading(false);\n  }, []);\n\n  if (loading) {\n    return <div>Загрузка...</div>; \n  }\n\n  return isAuthenticated ? children : <Navigate to=\"/Authorization\" replace />;\n}\n\n\nconst App = () => {\n  return (\n    <Router>\n      <Routes>\n        <Route path=\"/\" element={<Home />} />\n        <Route path='/ApiDiscription' element={<ApiDiscription />}/>\n        <Route path=\"/Authorization\" element={<AuthorizationForm />} />\n        <Route path=\"/Registration\" element={<RegistrationForm />} />\n        <Route path=\"/UpdatePassword\" element={<UpdatePassword />} />\n        <Route path=\"/CatalogSection\" element={<CatalogSection />} />\n        <Route path=\"/DeliveryAndPayment\" element={<DeliveryAndPayment />} />\n        <Route path=\"/Personal\" element= {\n                                    <ProtectedRoute>\n                                      <PersonalSpace />\n                                    </ProtectedRoute>} />\n        <Route path=\"/Basket\" element= {\n                                    <ProtectedRoute>\n                                      <Basket />\n                                    </ProtectedRoute>} />\n        <Route path=\"/DefineUser\" element= {\n                                    <ProtectedRoute>\n                                      <DefineUser />\n                                    </ProtectedRoute>} />\n        <Route path=\"/CompanyDashboard\" element= {\n                                  <ProtectedRoute>\n                                    <CompanyDashboard />\n                                  </ProtectedRoute>} />\n        \n      </Routes>\n    </Router>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}